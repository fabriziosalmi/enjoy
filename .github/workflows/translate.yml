name: ğŸŒ Auto-Translate Content

on:
  push:
    paths:
      - 'README.md'
      - 'QUICKSTART.md'
      - 'MANIFESTO.md'
  workflow_dispatch:
    inputs:
      target_language:
        description: 'Target language code (es, fr, de, it, pt, ja, zh, ko)'
        required: true
        default: 'es'

jobs:
  translate:
    runs-on: [self-hosted, enjoy-trusted]
    permissions:
      contents: write
      
    steps:
      - name: Checkout
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          
      - name: Generate Translation Stubs
        run: |
          # Create i18n directory if not exists
          mkdir -p i18n
          
          # List of target languages
          LANGUAGES="es fr de it pt ja zh ko ru ar hi"
          
          # For each language, create a stub if README doesn't exist
          for lang in $LANGUAGES; do
            if [ ! -f "README.$lang.md" ]; then
              echo "# ğŸ® enjoy" > "README.$lang.md"
              echo "" >> "README.$lang.md"
              echo "> ğŸŒ **Translation needed!** Help us translate to your language." >> "README.$lang.md"
              echo "" >> "README.$lang.md"
              echo "---" >> "README.$lang.md"
              echo "" >> "README.$lang.md"
              echo "## How to Contribute This Translation" >> "README.$lang.md"
              echo "" >> "README.$lang.md"
              echo "1. Fork this repository" >> "README.$lang.md"
              echo "2. Edit this file (\`README.$lang.md\`)" >> "README.$lang.md"
              echo "3. Translate from [README.md](README.md)" >> "README.$lang.md"
              echo "4. Open a Pull Request" >> "README.$lang.md"
              echo "" >> "README.$lang.md"
              echo "See [TRANSLATIONS.md](TRANSLATIONS.md) for guidelines." >> "README.$lang.md"
              echo "" >> "README.$lang.md"
              echo "---" >> "README.$lang.md"
              echo "" >> "README.$lang.md"
              echo "ğŸ® [Play in English](README.md) | [All Languages](TRANSLATIONS.md)" >> "README.$lang.md"
              echo "Created stub for $lang"
            fi
          done
          
      - name: Create Language Selector
        run: |
          cat > i18n/LANGUAGES.md << 'EOF'
          # ğŸŒ Choose Your Language
          
          > **enjoy** speaks all languages!
          
          | Language | Status | Link |
          |----------|--------|------|
          | ğŸ‡¬ğŸ‡§ English | âœ… Complete | [README.md](../README.md) |
          | ğŸ‡ªğŸ‡¸ EspaÃ±ol | ğŸ”œ Needed | [README.es.md](../README.es.md) |
          | ğŸ‡«ğŸ‡· FranÃ§ais | ğŸ”œ Needed | [README.fr.md](../README.fr.md) |
          | ğŸ‡©ğŸ‡ª Deutsch | ğŸ”œ Needed | [README.de.md](../README.de.md) |
          | ğŸ‡®ğŸ‡¹ Italiano | ğŸ”œ Needed | [README.it.md](../README.it.md) |
          | ğŸ‡µğŸ‡¹ PortuguÃªs | ğŸ”œ Needed | [README.pt.md](../README.pt.md) |
          | ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª | ğŸ”œ Needed | [README.ja.md](../README.ja.md) |
          | ğŸ‡¨ğŸ‡³ ä¸­æ–‡ | ğŸ”œ Needed | [README.zh.md](../README.zh.md) |
          | ğŸ‡°ğŸ‡· í•œêµ­ì–´ | ğŸ”œ Needed | [README.ko.md](../README.ko.md) |
          | ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹ | ğŸ”œ Needed | [README.ru.md](../README.ru.md) |
          | ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© | ğŸ”œ Needed | [README.ar.md](../README.ar.md) |
          | ğŸ‡®ğŸ‡³ à¤¹à¤¿à¤¨à¥à¤¦à¥€ | ğŸ”œ Needed | [README.hi.md](../README.hi.md) |
          
          ---
          
          ## Want to help translate?
          
          1. Pick a language marked ğŸ”œ
          2. Fork the repo
          3. Translate the file
          4. Open a PR
          
          **You will receive:**
          - ğŸ–ï¸ Translator badge
          - â­ +50 Karma bonus
          - ğŸ’œ Eternal gratitude
          
          [Translation Guide](../TRANSLATIONS.md)
          EOF
          
      - name: Commit translations
        run: |
          git config --local user.email "github-actions[bot]@users.noreply.github.com"
          git config --local user.name "github-actions[bot]"
          git add -A
          git diff --staged --quiet || git commit -m "ğŸŒ auto: update translation stubs [skip ci]"
          git push || echo "No changes to push"
