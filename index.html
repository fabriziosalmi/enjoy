<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>enjoy</title>
    <meta name="description" content="A living organism. 100 levels. Contribute to evolve.">
    <meta property="og:title" content="enjoy">
    <meta property="og:description" content="The repo breathes. The game evolves. Join the organism.">
    <meta property="og:image" content="https://fabriziosalmi.github.io/enjoy/og-image.png">
    <meta property="og:url" content="https://fabriziosalmi.github.io/enjoy/">
    <meta name="twitter:card" content="summary_large_image">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500&family=JetBrains+Mono:wght@300&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #030305;
            --sky-top: #050508;
            --sky-mid: #0a0a12;
            --sky-bottom: #12121f;
            --hill-far: rgba(15, 15, 25, 0.9);
            --hill-mid: rgba(10, 10, 18, 0.95);
            --hill-near: rgba(5, 5, 10, 1);
            --surface: rgba(255,255,255,0.02);
            --border: rgba(255,255,255,0.06);
            --text: rgba(255,255,255,0.87);
            --text-muted: rgba(255,255,255,0.4);
            --accent: #6366f1;
            --accent2: #a855f7;
            --accent3: #ec4899;
            --glow: rgba(99, 102, 241, 0.15);
            --star-opacity: 1;
            --firefly-opacity: 0.6;
            --mist-opacity: 0.15;
            --aurora-opacity: 0;
            --celestial-color: #c9d1d9;
            --celestial-glow: rgba(200, 210, 220, 0.08);
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           TIME-BASED THEMES - Full day/night cycle
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        body.time-night {
            --sky-top: #050508;
            --sky-mid: #0a0a12;
            --sky-bottom: #12121f;
            --hill-far: rgba(15, 15, 25, 0.9);
            --hill-mid: rgba(10, 10, 18, 0.95);
            --hill-near: rgba(5, 5, 10, 1);
            --star-opacity: 1;
            --firefly-opacity: 0.6;
            --mist-opacity: 0.15;
            --celestial-color: #c9d1d9;
            --celestial-glow: rgba(200, 210, 220, 0.1);
            --accent: #6366f1;
            --ui-bg: rgba(0, 0, 0, 0.6);
            --ui-border: rgba(255, 255, 255, 0.1);
        }
        
        body.time-dawn {
            --sky-top: #1a1525;
            --sky-mid: #3d2a4d;
            --sky-bottom: #8b5a5a;
            --hill-far: rgba(60, 40, 50, 0.8);
            --hill-mid: rgba(40, 25, 35, 0.9);
            --hill-near: rgba(25, 15, 20, 1);
            --star-opacity: 0.15;
            --firefly-opacity: 0.2;
            --mist-opacity: 0.25;
            --celestial-color: #ffb07c;
            --celestial-glow: rgba(255, 150, 100, 0.15);
            --text: rgba(255, 220, 200, 0.95);
            --text-muted: rgba(255, 220, 200, 0.7);
            --accent: #f59e0b;
            --ui-bg: rgba(30, 20, 25, 0.8);
            --ui-border: rgba(255, 200, 180, 0.2);
        }
        
        body.time-morning {
            --sky-top: #b8d4e8;
            --sky-mid: #d4e5f0;
            --sky-bottom: #f0f4e8;
            --hill-far: rgba(120, 140, 110, 0.6);
            --hill-mid: rgba(90, 115, 80, 0.75);
            --hill-near: rgba(60, 85, 55, 0.9);
            --star-opacity: 0;
            --firefly-opacity: 0;
            --mist-opacity: 0.08;
            --celestial-color: #fff5cc;
            --celestial-glow: rgba(255, 230, 150, 0.2);
            --text: rgba(255, 255, 255, 0.95);
            --text-muted: rgba(255, 255, 255, 0.7);
            --accent: #2563eb;
            --ui-bg: rgba(30, 60, 50, 0.85);
            --ui-border: rgba(255, 255, 255, 0.2);
        }
        
        body.time-noon {
            --sky-top: #7ec8e8;
            --sky-mid: #a8ddf0;
            --sky-bottom: #e8f4e8;
            --hill-far: rgba(130, 155, 115, 0.5);
            --hill-mid: rgba(100, 130, 85, 0.7);
            --hill-near: rgba(70, 100, 60, 0.85);
            --star-opacity: 0;
            --firefly-opacity: 0;
            --mist-opacity: 0;
            --celestial-color: #fffde8;
            --celestial-glow: rgba(255, 250, 200, 0.3);
            --text: rgba(255, 255, 255, 0.95);
            --text-muted: rgba(255, 255, 255, 0.7);
            --accent: #ca8a04;
            --ui-bg: rgba(20, 50, 40, 0.85);
            --ui-border: rgba(255, 255, 255, 0.2);
        }
        
        body.time-afternoon {
            --sky-top: #a5c4d4;
            --sky-mid: #d4c8b8;
            --sky-bottom: #e8dcc8;
            --hill-far: rgba(140, 130, 100, 0.6);
            --hill-mid: rgba(110, 100, 75, 0.75);
            --hill-near: rgba(80, 70, 50, 0.9);
            --star-opacity: 0;
            --firefly-opacity: 0;
            --mist-opacity: 0.05;
            --celestial-color: #ffe4b5;
            --celestial-glow: rgba(255, 200, 120, 0.18);
            --text: rgba(255, 255, 255, 0.95);
            --text-muted: rgba(255, 255, 255, 0.7);
            --accent: #7c3aed;
            --ui-bg: rgba(40, 35, 30, 0.85);
            --ui-border: rgba(255, 255, 255, 0.2);
        }
        
        body.time-sunset {
            --sky-top: #2d2040;
            --sky-mid: #6b4060;
            --sky-bottom: #c87050;
            --hill-far: rgba(80, 50, 60, 0.7);
            --hill-mid: rgba(50, 30, 40, 0.85);
            --hill-near: rgba(30, 15, 25, 1);
            --star-opacity: 0.3;
            --firefly-opacity: 0.3;
            --mist-opacity: 0.1;
            --celestial-color: #ff8c5a;
            --celestial-glow: rgba(255, 120, 80, 0.2);
            --text: rgba(255, 220, 200, 0.95);
            --text-muted: rgba(255, 200, 180, 0.7);
            --accent: #f43f5e;
            --ui-bg: rgba(40, 25, 35, 0.8);
            --ui-border: rgba(255, 180, 150, 0.2);
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { height: 100%; overflow: hidden; }
        
        body {
            font-family: 'Space Grotesk', -apple-system, sans-serif;
            font-weight: 300;
            background: linear-gradient(180deg, var(--sky-top) 0%, var(--sky-mid) 40%, var(--sky-bottom) 100%);
            color: var(--text);
            letter-spacing: 0.01em;
            cursor: none;
            transition: all 8s ease;
        }

        /* Ambient light overlay - subtle color temperature */
        body::after {
            content: '';
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 9999;
            opacity: 0;
            transition: background 8s ease, opacity 8s ease;
        }
        body.time-dawn::after {
            background: radial-gradient(ellipse at 10% 70%, rgba(255, 150, 80, 0.06) 0%, transparent 60%);
            opacity: 1;
        }
        body.time-morning::after {
            background: radial-gradient(ellipse at 30% 30%, rgba(255, 220, 150, 0.04) 0%, transparent 50%);
            opacity: 1;
        }
        body.time-noon::after {
            background: radial-gradient(ellipse at 50% 15%, rgba(255, 255, 220, 0.05) 0%, transparent 50%);
            opacity: 1;
        }
        body.time-afternoon::after {
            background: radial-gradient(ellipse at 70% 30%, rgba(255, 210, 130, 0.04) 0%, transparent 50%);
            opacity: 1;
        }
        body.time-sunset::after {
            background: radial-gradient(ellipse at 90% 70%, rgba(255, 100, 50, 0.08) 0%, transparent 60%);
            opacity: 1;
        }
        body.time-night::after {
            background: radial-gradient(ellipse at 85% 20%, rgba(150, 170, 220, 0.04) 0%, transparent 50%);
            opacity: 1;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           CUSTOM CURSOR
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .cursor {
            position: fixed;
            width: 20px;
            height: 20px;
            border: 1px solid rgba(255,255,255,0.5);
            border-radius: 50%;
            pointer-events: none;
            z-index: 10000;
            mix-blend-mode: difference;
            will-change: transform;
        }
        .cursor-dot {
            position: fixed;
            width: 4px;
            height: 4px;
            background: white;
            border-radius: 50%;
            pointer-events: none;
            z-index: 10001;
            mix-blend-mode: difference;
            will-change: transform;
        }
        .cursor.active { transform: scale(2) !important; border-color: var(--accent); }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           AURORA - Karma intensity glow
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .aurora-layer {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 50%;
            pointer-events: none;
            z-index: 1;
            opacity: 0;
            background: linear-gradient(180deg,
                rgba(99, 102, 241, 0.12) 0%,
                rgba(168, 85, 247, 0.08) 30%,
                rgba(236, 72, 153, 0.04) 60%,
                transparent 100%);
            animation: aurora-wave 25s ease-in-out infinite;
            transition: opacity 5s ease;
        }
        .aurora-layer.active { opacity: var(--aurora-opacity, 0.5); }
        
        @keyframes aurora-wave {
            0%, 100% { transform: translateY(0) scaleY(1); filter: hue-rotate(0deg); }
            33% { transform: translateY(-15px) scaleY(1.1); filter: hue-rotate(30deg); }
            66% { transform: translateY(10px) scaleY(0.9); filter: hue-rotate(-30deg); }
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           STARS LAYER - Anonymous stars in sky
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

        .stars-layer {
            position: fixed;
            left: 0;
            right: 0;
            top: 0;
            height: 60%;
            pointer-events: none;
            z-index: 2;
            opacity: var(--star-opacity);
            transition: opacity 8s ease;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           CELESTIAL BODY - Sun/Moon based on time
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .celestial {
            position: fixed;
            width: 80px;
            height: 80px;
            pointer-events: none;
            z-index: 5;
            transition: left 60s linear, top 60s linear;
            transform: translate(-50%, -50%);
        }

        /* Atmospheric glow - subtle radial halo */
        .celestial {
            --glow-intensity: 1;
            transition: opacity 2s ease;
        }
        .celestial::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 300%;
            height: 300%;
            border-radius: 50%;
            background: radial-gradient(circle, var(--celestial-glow) 0%, transparent 70%);
            opacity: calc(0.6 * var(--glow-intensity));
            pointer-events: none;
            transition: opacity 3s ease, background 3s ease;
        }

        .celestial-body {
            position: relative;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: var(--celestial-color);
            box-shadow:
                0 0 20px var(--celestial-glow),
                0 0 40px var(--celestial-glow),
                0 0 80px var(--celestial-glow);
            transition: transform 0.5s ease-out, box-shadow 3s ease, background 3s ease;
            z-index: 1;
        }

        /* Moon - soft silver, flat with subtle top-left highlight */
        body.time-night .celestial::before {
            background: radial-gradient(circle, rgba(200, 210, 230, 0.15) 0%, transparent 60%);
            opacity: calc(0.8 * var(--glow-intensity));
        }
        body.time-night .celestial-body {
            background: linear-gradient(135deg, #f8f8ff 0%, #e8e8f0 30%, #d0d0dd 100%);
            box-shadow:
                0 0 20px rgba(255, 255, 255, 0.5),
                0 0 50px rgba(200, 210, 230, 0.3),
                0 0 100px rgba(180, 190, 220, 0.15);
        }

        /* Dawn - Sun rising, orange/peach - flat with subtle top-left highlight */
        body.time-dawn .celestial::before {
            background: radial-gradient(circle, rgba(255, 140, 60, 0.35) 0%, rgba(255, 100, 40, 0.15) 40%, transparent 70%);
            opacity: var(--glow-intensity);
            width: 400%;
            height: 400%;
        }
        body.time-dawn .celestial-body {
            background: linear-gradient(135deg, #ffbb66 0%, #ff8833 25%, #ee6622 100%);
            box-shadow:
                0 0 25px rgba(255, 150, 70, 0.9),
                0 0 50px rgba(255, 120, 50, 0.6),
                0 0 100px rgba(255, 90, 40, 0.3),
                0 0 160px rgba(200, 70, 30, 0.15);
        }

        /* Morning - Sun climbing, warm yellow/gold */
        body.time-morning .celestial::before {
            background: radial-gradient(circle, rgba(255, 220, 120, 0.25) 0%, rgba(255, 200, 100, 0.1) 40%, transparent 65%);
            opacity: var(--glow-intensity);
            width: 300%;
            height: 300%;
        }
        body.time-morning .celestial-body {
            background: linear-gradient(135deg, #ffee88 0%, #ffdd55 30%, #ffcc44 100%);
            box-shadow:
                0 0 30px rgba(255, 230, 120, 0.8),
                0 0 60px rgba(255, 210, 90, 0.5),
                0 0 120px rgba(255, 190, 70, 0.25);
        }

        /* Noon - Sun at zenith, bright cream/yellow */
        body.time-noon .celestial::before {
            background: radial-gradient(circle, rgba(255, 255, 240, 0.3) 0%, rgba(255, 250, 220, 0.12) 40%, transparent 60%);
            opacity: var(--glow-intensity);
            width: 280%;
            height: 280%;
        }
        body.time-noon .celestial-body {
            background: linear-gradient(135deg, #fffde0 0%, #ffee88 35%, #ffdd66 100%);
            box-shadow:
                0 0 35px rgba(255, 255, 250, 0.9),
                0 0 70px rgba(255, 250, 220, 0.6),
                0 0 130px rgba(255, 240, 180, 0.35);
        }

        /* Afternoon - Sun descending, golden/amber */
        body.time-afternoon .celestial::before {
            background: radial-gradient(circle, rgba(255, 200, 100, 0.25) 0%, rgba(255, 170, 70, 0.1) 40%, transparent 65%);
            opacity: var(--glow-intensity);
            width: 320%;
            height: 320%;
        }
        body.time-afternoon .celestial-body {
            background: linear-gradient(135deg, #ffee77 0%, #ffcc44 30%, #ffbb33 100%);
            box-shadow:
                0 0 30px rgba(255, 210, 100, 0.75),
                0 0 60px rgba(255, 180, 70, 0.45),
                0 0 120px rgba(255, 150, 50, 0.25);
        }

        /* Sunset - Sun setting, deep red/crimson */
        body.time-sunset .celestial::before {
            background: radial-gradient(circle, rgba(255, 60, 20, 0.4) 0%, rgba(200, 40, 10, 0.2) 35%, rgba(150, 20, 0, 0.1) 55%, transparent 75%);
            opacity: var(--glow-intensity);
            width: 500%;
            height: 500%;
        }
        body.time-sunset .celestial-body {
            background: linear-gradient(135deg, #ff6633 0%, #dd3311 35%, #aa1100 100%);
            box-shadow:
                0 0 25px rgba(255, 70, 20, 1),
                0 0 50px rgba(230, 50, 10, 0.7),
                0 0 100px rgba(200, 40, 5, 0.5),
                0 0 180px rgba(150, 30, 0, 0.3),
                0 0 280px rgba(100, 20, 0, 0.15);
        }

        /* Celestial fully hidden when behind landscape */
        .celestial.behind-landscape {
            z-index: 1;
            opacity: 0 !important;
        }
        .celestial.behind-landscape::before {
            opacity: 0;
        }
        .celestial.behind-landscape .celestial-body {
            box-shadow: none;
            opacity: 0;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           MEDITERRANEAN LANDSCAPE - Multi-layer coastal view
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        :root {
            /* Sea colors - more atmospheric */
            --sea-deep: #5a7a8a;
            --sea-mid: #7a9aaa;
            --sea-light: #9abaca;
            --sea-shore: #b5d0dc;
            /* Land colors - warmer Mediterranean tones */
            --mountain-far: #5a5a6a;
            --mountain-mid: #6a6a7a;
            --terrace-color: #5d5b50;
            --terrace-shadow: #3d3b30;
            --vegetation: #4a5040;
            --cypress: #1a2818;
            --coast-sand: #d0c0a0;
        }
        
        body.time-night {
            --sea-deep: #0a1520;
            --sea-mid: #0f1f2d;
            --sea-light: #152838;
            --sea-shore: #1a3040;
            --mountain-far: #040408;
            --mountain-mid: #080810;
            --terrace-color: #0c0c12;
            --terrace-shadow: #050508;
            --vegetation: #050805;
            --cypress: #020402;
            --coast-sand: #151520;
        }
        
        body.time-dawn {
            --sea-deep: #1a2a40;
            --sea-mid: #253850;
            --sea-light: #354860;
            --sea-shore: #506080;
            --mountain-far: #352535;
            --mountain-mid: #453545;
            --terrace-color: #3a2a35;
            --terrace-shadow: #2a1a25;
            --vegetation: #2a3025;
            --cypress: #152010;
            --coast-sand: #504050;
        }
        
        body.time-morning {
            --sea-deep: #003366;
            --sea-mid: #005080;
            --sea-light: #0077be;
            --sea-shore: #4db8ff;
            --mountain-far: #5c6e64;
            --mountain-mid: #6d8275;
            --terrace-color: #556b46;
            --terrace-shadow: #3e5032;
            --vegetation: #2d4a22;
            --cypress: #1a3015;
            --coast-sand: #e6dcc3;
        }
        
        body.time-noon {
            --sea-deep: #004080;
            --sea-mid: #0060a0;
            --sea-light: #0088cc;
            --sea-shore: #00bfff;
            --mountain-far: #6e7e70;
            --mountain-mid: #839180;
            --terrace-color: #6b8c5a;
            --terrace-shadow: #4c6640;
            --vegetation: #3a5c2d;
            --cypress: #20351d;
            --coast-sand: #f2e6d0;
        }
        
        body.time-afternoon {
            --sea-deep: #103050;
            --sea-mid: #205070;
            --sea-light: #407090;
            --sea-shore: #70a0c0;
            --mountain-far: #6d6458;
            --mountain-mid: #7d7468;
            --terrace-color: #7c7050;
            --terrace-shadow: #5c5035;
            --vegetation: #4a5a3a;
            --cypress: #2a3a2a;
            --coast-sand: #decba5;
        }
        
        body.time-sunset {
            --sea-deep: #152535;
            --sea-mid: #1f3545;
            --sea-light: #2a4555;
            --sea-shore: #3a5565;
            --mountain-far: #402530;
            --mountain-mid: #503540;
            --terrace-color: #452530;
            --terrace-shadow: #301520;
            --vegetation: #2a1f1a;
            --cypress: #151010;
            --coast-sand: #806060;
        }
        
        .landscape {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 50%;
            pointer-events: none;
            z-index: 10;
        }
        
        .landscape svg {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 100%;
        }
        
        /* Sea layers */
        .sea-deep {
            fill: var(--sea-deep);
            transition: fill 8s ease;
        }
        .sea-mid {
            fill: var(--sea-mid);
            transition: fill 8s ease;
            animation: sea-wave 12s ease-in-out infinite;
        }
        .sea-light {
            fill: var(--sea-light);
            transition: fill 8s ease;
            animation: sea-wave 10s ease-in-out infinite reverse;
        }
        .sea-shore {
            fill: var(--sea-shore);
            transition: fill 8s ease;
            animation: sea-wave 8s ease-in-out infinite;
        }
        
        @keyframes sea-wave {
            0%, 100% { transform: translateX(0); }
            50% { transform: translateX(2px); }
        }
        
        /* Mountain layers */
        .mountain-far {
            fill: var(--mountain-far);
            transition: fill 8s ease;
            opacity: 0.7;
        }
        .mountain-mid {
            fill: var(--mountain-mid);
            transition: fill 8s ease;
            opacity: 0.85;
        }
        
        /* Terraces */
        .terrace {
            fill: var(--terrace-color);
            transition: fill 8s ease;
        }
        .terrace-shadow {
            fill: var(--terrace-shadow);
            transition: fill 8s ease;
        }
        
        /* Vegetation */
        .vegetation {
            fill: var(--vegetation);
            transition: fill 8s ease;
        }
        .cypress {
            fill: var(--cypress);
            transition: fill 8s ease;
        }
        
        /* Coast/sand */
        .coast-sand {
            fill: var(--coast-sand);
            transition: fill 8s ease;
        }
        
        /* Breathing animations for land */
        .mountain-far {
            animation: mountain-breathe 30s ease-in-out infinite;
        }
        .mountain-mid {
            animation: mountain-breathe 25s ease-in-out infinite reverse;
        }
        @keyframes mountain-breathe {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-2px); }
        }
        
        /* Cypress sway */
        .cypress-tree {
            transform-origin: bottom center;
            animation: cypress-sway 8s ease-in-out infinite;
        }
        .cypress-tree:nth-child(odd) {
            animation-delay: -2s;
            animation-duration: 9s;
        }
        .cypress-tree:nth-child(even) {
            animation-delay: -4s;
            animation-duration: 7s;
        }
        @keyframes cypress-sway {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(0.5deg); }
            75% { transform: rotate(-0.5deg); }
        }
        
        /* Sea shimmer effect */
        .sea-shimmer {
            fill: rgba(255, 255, 255, 0.1);
            animation: shimmer 4s ease-in-out infinite;
        }
        @keyframes shimmer {
            0%, 100% { opacity: 0.05; }
            50% { opacity: 0.15; }
        }
        
        /* Legacy hill classes for compatibility */
        .hill-far {
            fill: var(--hill-far);
            transition: fill 8s ease;
            animation: hill-breathe 25s ease-in-out infinite;
        }
        .hill-mid {
            fill: var(--hill-mid);
            transition: fill 8s ease;
            animation: hill-breathe 20s ease-in-out infinite reverse;
        }
        .hill-near {
            fill: var(--hill-near);
            transition: fill 8s ease;
            animation: hill-breathe 30s ease-in-out infinite;
        }
        @keyframes hill-breathe {
            0%, 100% { transform: translateY(0) scaleY(1); }
            50% { transform: translateY(-3px) scaleY(1.01); }
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           MIST - Atmospheric fog over sea and coast
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .mist-layer {
            position: fixed;
            bottom: 20%;
            left: 0;
            right: 0;
            height: 35%;
            pointer-events: none;
            z-index: 11;
            opacity: var(--mist-opacity);
            transition: opacity 5s ease;
        }
        .mist {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(180deg,
                transparent 0%,
                rgba(200, 210, 220, 0.15) 30%,
                rgba(180, 190, 200, 0.25) 60%,
                rgba(160, 170, 180, 0.1) 100%);
            animation: mist-flow 60s ease-in-out infinite;
        }
        .mist::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg,
                transparent 0%,
                rgba(220, 230, 240, 0.1) 30%,
                rgba(220, 230, 240, 0.15) 50%,
                rgba(220, 230, 240, 0.1) 70%,
                transparent 100%);
            animation: mist-drift 45s ease-in-out infinite;
        }
        @keyframes mist-flow {
            0%, 100% { transform: translateX(-5%) scaleY(1); opacity: 0.7; }
            50% { transform: translateX(5%) scaleY(1.15); opacity: 1; }
        }
        @keyframes mist-drift {
            0%, 100% { transform: translateX(-10%); }
            50% { transform: translateX(10%); }
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           SOUL LIGHTS - Players as fireflies on the hillside
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        /* DISABLED: Players now shown as orange stars in sky */
        .souls-layer {
            display: none;
        }
        .soul-light {
            position: absolute;
            width: 3px;
            height: 3px;
            background: #ffd93d;
            border-radius: 50%;
            box-shadow: 0 0 8px 3px rgba(255, 217, 61, 0.6);
            animation: soul-glow 4s ease-in-out infinite;
        }
        .soul-light.active {
            background: #4ade80;
            box-shadow: 0 0 10px 4px rgba(74, 222, 128, 0.7);
        }
        @keyframes soul-glow {
            0%, 100% { opacity: 0.2; transform: scale(1) translateY(0); }
            50% { opacity: 1; transform: scale(1.5) translateY(-3px); }
        }
        
        /* Window lights in buildings at night */
        body.time-night .landscape rect,
        body.time-sunset .landscape rect {
            fill: rgba(255, 220, 150, 0.4);
            animation: window-flicker 8s ease-in-out infinite;
        }
        @keyframes window-flicker {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.6; }
            75% { opacity: 0.4; }
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           SHOOTING STARS - Rare events
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .shooting-star {
            position: fixed;
            width: 120px;
            height: 2px;
            background: linear-gradient(90deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0) 100%);
            border-radius: 50%;
            pointer-events: none;
            z-index: 5;
            opacity: 0;
            transform-origin: left center;
        }
        .shooting-star.active {
            animation: shoot 1.2s ease-out forwards;
        }
        @keyframes shoot {
            0% { opacity: 0; transform: translateX(0) translateY(0) scaleX(0); }
            10% { opacity: 1; transform: translateX(30px) translateY(15px) scaleX(0.5); }
            30% { opacity: 1; transform: translateX(100px) translateY(50px) scaleX(1); }
            100% { opacity: 0; transform: translateX(400px) translateY(200px) scaleX(1.5); }
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           AMBIENT LAYERS
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .grain {
            position: fixed;
            inset: -50%;
            width: 200%;
            height: 200%;
            pointer-events: none;
            opacity: 0.03;
            z-index: 1000;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
            animation: grain 0.5s steps(1) infinite;
        }
        @keyframes grain {
            0%, 100% { transform: translate(0, 0); }
            25% { transform: translate(-2%, -2%); }
            50% { transform: translate(2%, 2%); }
            75% { transform: translate(-2%, 2%); }
        }
        
        .vignette {
            position: fixed;
            inset: 0;
            pointer-events: none;
            background: radial-gradient(ellipse at center, transparent 0%, transparent 50%, rgba(0,0,0,0.4) 100%);
            z-index: 999;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           CANVAS - For particles
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        #canvas {
            position: fixed;
            inset: 0;
            width: 100%;
            height: 100%;
            z-index: 4;
            pointer-events: none;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           UI ELEMENTS
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .hud-top {
            position: fixed;
            top: 2rem;
            left: 0;
            right: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1.5rem;
            z-index: 200;
            pointer-events: none; /* Let clicks pass through gaps */
        }
        .hud-item {
            pointer-events: auto;
            background: var(--ui-bg, rgba(0, 0, 0, 0.4));
            backdrop-filter: blur(12px);
            border: 1px solid var(--ui-border, rgba(255, 255, 255, 0.1));
            border-radius: 100px;
            padding: 0.6rem 1.2rem;
            display: flex;
            align-items: center;
            gap: 0.6rem;
            color: var(--text);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            font-size: 0.85rem;
            text-decoration: none;
        }
        .hud-item:hover {
            border-color: var(--accent);
            background: var(--ui-bg, rgba(0, 0, 0, 0.6));
            transform: translateY(-2px);
        }
        .hud-emoji { font-size: 1.2rem; }
        .hud-value { font-family: 'JetBrains Mono', monospace; font-weight: 600; }
        .hud-label { text-transform: uppercase; font-size: 0.7rem; opacity: 0.7; letter-spacing: 0.05em; }
        .hud-accent { color: var(--accent); font-family: 'JetBrains Mono', monospace; }

        .cta {
            position: fixed;
            bottom: 5rem;
            left: 50%;
            transform: translateX(-50%);
            z-index: 100;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
        }
        .cta a {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            padding: 1rem 2.5rem;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(8px);
            color: var(--text);
            border-radius: 100px;
            text-decoration: none;
            font-weight: 500;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }
        .cta a:hover {
            transform: scale(1.05);
            background: rgba(0, 0, 0, 0.6);
            border-color: var(--accent);
            box-shadow: 0 0 30px var(--glow);
        }

        .footer-links {
            position: fixed;
            bottom: 2.5rem;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 1.5rem;
            z-index: 100;
        }
        .footer-links a {
            font-size: 0.65rem;
            letter-spacing: 0.1em;
            color: var(--text-muted);
            text-decoration: none;
            opacity: 0.6;
            transition: all 0.3s ease;
            text-transform: uppercase;
        }
        .footer-links a:hover {
            opacity: 1;
            color: var(--accent);
            transform: translateY(-2px);
        }
        
        /* Achievements HUD - Centered below footer links */
        .achievements-hud {
            position: fixed;
            bottom: 0.8rem;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-wrap: nowrap;
            justify-content: center;
            gap: 0.3rem;
            opacity: 0.6;
            transition: opacity 0.5s ease;
            z-index: 100;
        }
        .achievements-hud:hover { opacity: 1; }
        .ach-icon {
            width: 28px;
            height: 28px;
            background: rgba(0,0,0,0.4);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            opacity: 0.5;
            filter: grayscale(1);
            transition: all 0.3s ease;
            cursor: pointer;
            backdrop-filter: blur(4px);
        }
        .ach-icon.unlocked { opacity: 1; filter: none; border-color: rgba(245, 158, 11, 0.5); background: rgba(50, 40, 20, 0.6); }
        .ach-icon:hover { transform: scale(1.2); z-index: 10; border-color: var(--accent); opacity: 1; }
        
        /* Remove old classes */
        .stat, .stat-tl, .stat-tr, .level-display, .time-indicator, .stat-badge, .live, .repo-stats { display: none; }
        
        /* Responsive */
        @media (max-width: 768px) {
            .cursor, .cursor-dot { display: none; }
            .hud-top { 
                top: 1rem; 
                gap: 0.5rem; 
                flex-wrap: wrap; 
                padding: 0 1rem;
            }
            .hud-item {
                padding: 0.4rem 0.8rem;
                font-size: 0.75rem;
            }
            .hud-emoji { font-size: 1rem; }
            /* .hud-label { display: none; } Kept visible on mobile as requested */
            
            .cta { bottom: 4rem; }
            .cta a { padding: 0.8rem 2rem; font-size: 0.8rem; }
            .footer-links { display: flex; bottom: 1.5rem; gap: 0.8rem; }
            .audio-toggle { top: 1rem; right: 1rem; left: auto; bottom: auto; }
        }
        
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
        
        /* Popups */
        .achievement-toast {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(3, 3, 5, 0.95);
            border: 1px solid rgba(245, 158, 11, 0.5);
            border-radius: 1rem;
            padding: 2.5rem 4rem;
            text-align: center;
            z-index: 2000;
            opacity: 0;
            pointer-events: none;
            transition: all 0.5s ease;
            backdrop-filter: blur(20px);
        }
        .achievement-toast.show { opacity: 1; animation: ach-in 0.6s ease; }
        @keyframes ach-in {
            0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
            50% { transform: translate(-50%, -50%) scale(1.1); }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }
        .achievement-emoji { font-size: 4rem; }
        .achievement-name { font-size: 1.3rem; color: #f59e0b; margin: 0.5rem 0; }
        .achievement-desc { font-size: 0.85rem; color: var(--text-muted); }
        
        /* Mystery Popup */
        .mystery-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            background: rgba(3, 3, 5, 0.95);
            border: 1px solid var(--accent2);
            border-radius: 1rem;
            padding: 2rem 3rem;
            text-align: center;
            z-index: 2000;
            opacity: 0;
            pointer-events: none;
            transition: all 0.4s ease;
            backdrop-filter: blur(20px);
        }
        .mystery-popup.show { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        .mystery-emoji { font-size: 5rem; animation: mystery-shake 0.5s ease-in-out; }
        @keyframes mystery-shake { 0%, 100% { transform: rotate(0); } 20% { transform: rotate(-15deg); } 40% { transform: rotate(15deg); } 60% { transform: rotate(-10deg); } 80% { transform: rotate(10deg); } }
        .mystery-title { font-size: 1.5rem; color: var(--accent2); margin: 1rem 0; }
        .mystery-reward { font-family: 'JetBrains Mono', monospace; color: var(--text); }
        
        /* Achievements HUD - now in footer area, handled by earlier definition */
        .ach-icon.footer-ach {
            width: 26px;
            height: 26px;
            background: rgba(0,0,0,0.5);
            border: 1px solid var(--border);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            opacity: 0.3;
            filter: grayscale(1);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .ach-icon.unlocked { opacity: 1; filter: none; border-color: rgba(245, 158, 11, 0.5); }
        .ach-icon:hover { transform: scale(1.3); z-index: 10; }
        
        /* Responsive */
        @media (max-width: 768px) {
            .cursor, .cursor-dot { display: none; }
            .time-indicator { top: 0.8rem; left: 0.8rem; padding: 0.4rem 0.8rem; font-size: 0.65rem; }
            .stat { font-size: 0.6rem; }
            .stat-value { font-size: 1.2rem; }
            .stat-tl { top: 3.5rem; left: 0.8rem; }
            .stat-tr { display: none; }
            .cta { bottom: 15%; }
            .cta a { padding: 0.8rem 1.5rem; font-size: 0.7rem; }
            .level-display { bottom: 0.8rem; right: 0.8rem; }
            .level-ring { width: 44px; height: 44px; }
            .footer-links { display: flex; bottom: 0.5rem; gap: 0.8rem; }
            .live { bottom: 0.8rem; right: 0.8rem; transform: translateX(-55px); }
            .achievements-hud { display: none; }
        }
        
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body class="time-night">
    <div class="cursor" id="cursor"></div>
    <div class="cursor-dot" id="cursorDot"></div>
    
    <!-- Aurora (karma intensity) -->
    <div class="aurora-layer" id="auroraLayer"></div>
    
    <!-- Stars Layer (anonymous stars) -->
    <!-- Stars Layer - unified: background + stargazers (yellow) + players (orange) -->
    <div class="stars-layer" id="starsLayer"></div>

    <!-- Celestial Body -->
    <div class="celestial" id="celestial">
        <div class="celestial-body" id="celestialBody"></div>
    </div>
    
    <!-- Canvas for particles -->
    <canvas id="canvas"></canvas>
    
    <!-- Landscape - Elegant Mediterranean View -->
    <div class="landscape">
        <svg viewBox="0 0 1600 600" preserveAspectRatio="xMidYMax slice">
            <defs>
                <linearGradient id="seaGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                    <stop offset="0%" style="stop-color:var(--sea-deep)"/>
                    <stop offset="100%" style="stop-color:var(--sea-light)"/>
                </linearGradient>
                <linearGradient id="mountainGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                    <stop offset="0%" style="stop-color:var(--mountain-far)"/>
                    <stop offset="100%" style="stop-color:var(--mountain-mid)"/>
                </linearGradient>
            </defs>
            
            <!-- LAYER 1: SEA - Defines the Horizon Line (y=200) -->
            <!-- The sea starts at y=200, leaving y=0-200 for sky/mountain peaks -->
            <rect fill="url(#seaGrad)" x="0" y="200" width="1600" height="400"/>
            <path class="sea-mid" d="M0,250 Q400,230 800,260 Q1200,240 1600,270 L1600,600 L0,600 Z" opacity="0.5"/>
            <path class="sea-light" d="M0,320 Q400,300 800,330 Q1200,310 1600,340 L1600,600 L0,600 Z" opacity="0.6"/>
            
            <!-- LAYER 2: MOUNTAIN - Rises ABOVE the sea horizon (Peak at y=50) -->
            <!-- Positioned on the right, fully opaque to cover sea and sun behind it -->
            <path fill="url(#mountainGrad)" d="M1200,600 L1300,200 Q1450,140 1600,80 L1600,600 Z" opacity="1"/>
            
            <!-- LAYER 3: MAIN HILLSIDE - Foreground, spans full width, covers bottom -->
            <!-- Starts low left (y=450), goes up to right (y=250), covering sea and mountain base -->
            <path class="terrace" d="M-10,480 Q400,450 800,380 Q1200,300 1610,280 L1610,600 L-10,600 Z"/>
            
            <!-- TERRACE DETAILS -->
            <g stroke="var(--terrace-shadow)" fill="none" stroke-width="2" opacity="0.3">
                <path d="M0,510 Q400,480 800,410 Q1200,330 1600,310"/>
                <path d="M0,550 Q400,520 800,450 Q1200,370 1600,350"/>
                <path d="M0,590 Q400,560 800,490 Q1200,410 1600,390"/>
            </g>
            
            <!-- Foreground accents -->
            <!-- Sand/Coast extending from left to bottom right -->
            <path class="coast-sand" d="M0,480 Q600,520 1600,600 L0,600 Z" opacity="0.4"/>
        </svg>
    </div>
    
    <!-- Mist -->
    <div class="mist-layer">
        <div class="mist"></div>
    </div>
    
    <!-- Soul Lights -->
    <div class="souls-layer" id="soulsLayer"></div>
    
    <!-- Shooting Star -->
    <div class="shooting-star" id="shootingStar"></div>
    
    <!-- Ambient -->
    <div class="grain"></div>
    <div class="vignette"></div>
    
    <!-- UI -->
    <div class="hud-top">
        <a href="time.html" class="hud-item" title="Time bonuses">
            <span class="hud-emoji" id="timeEmoji">ğŸŒ™</span>
            <span class="hud-accent" id="timeMult">Ã—1.4</span>
        </a>

        <div class="hud-item" title="Karma">
            <span class="hud-emoji">ğŸ’œ</span>
            <span class="hud-value" id="statKarma">0</span>
        </div>

        <div class="hud-item" title="Souls">
            <span class="hud-emoji">ğŸ‘¤</span>
            <span class="hud-value" id="statSouls">0</span>
        </div>
        
        <div class="hud-item" title="Current Level">
            <span class="hud-emoji">ğŸ†</span>
            <span class="hud-value" id="levelNumber">1</span>
        </div>

        <a href="https://github.com/fabriziosalmi/enjoy/stargazers" class="hud-item" title="GitHub Stars">
            <span class="hud-emoji">â­</span>
            <span class="hud-value" id="starCount">0</span>
        </a>

        <a href="https://github.com/fabriziosalmi/enjoy/forks" class="hud-item" title="GitHub Forks">
            <span class="hud-emoji">ğŸ´</span>
            <span class="hud-value" id="forkCount">0</span>
        </a>

        <button class="hud-item" id="audioToggle" title="Toggle audio">
            <span class="hud-emoji" id="audioEmoji">ğŸ”‡</span>
        </button>
    </div>
    
    <div class="cta">
        <a href="https://github.com/fabriziosalmi/enjoy" id="ctaLink">
            <svg class="cta-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <circle cx="12" cy="12" r="10"/>
                <line x1="12" y1="8" x2="12" y2="16"/>
                <line x1="8" y1="12" x2="16" y2="12"/>
            </svg>
            <span>contribute</span>
        </a>
    </div>

    <div class="footer-links">
        <a href="https://github.com/fabriziosalmi/enjoy/blob/main/LORE.md">lore</a>
        <a href="voice.html">voice</a>
        <a href="bounty.html">bounties</a>
    </div>

    <div class="achievements-hud" id="achievementsHud"></div>
    
    <div class="achievement-toast" id="achievementToast">
        <div class="achievement-emoji" id="achEmoji">ğŸ†</div>
        <div class="achievement-name" id="achName">Achievement</div>
        <div class="achievement-desc" id="achDesc">Description</div>
    </div>
    
    <div class="mystery-popup" id="mysteryPopup">
        <div class="mystery-emoji" id="mysteryEmoji">ğŸ</div>
        <div class="mystery-title" id="mysteryTitle">Mystery Box!</div>
        <div class="mystery-reward" id="mysteryReward">+25 karma</div>
    </div>

    <script>
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // STATE
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        let state = null;
        let repoStats = { stars: 0, forks: 0, stargazers: [] };
        let audioEnabled = localStorage.getItem('audioEnabled') !== 'false';
        let currentPeriod = 'night';
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // CURSOR
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        const cursor = document.getElementById('cursor');
        const cursorDot = document.getElementById('cursorDot');
        
        document.addEventListener('mousemove', (e) => {
            cursor.style.transform = `translate(${e.clientX - 10}px, ${e.clientY - 10}px)`;
            cursorDot.style.transform = `translate(${e.clientX - 2}px, ${e.clientY - 2}px)`;
        });
        
        document.querySelectorAll('a, button').forEach(el => {
            el.addEventListener('mouseenter', () => cursor.classList.add('active'));
            el.addEventListener('mouseleave', () => cursor.classList.remove('active'));
        });
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // TIME SYSTEM
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        const TIME_PERIODS = {
            // Sun Cycle: 5:00 - 20:00
            dawn:      { start: 5,  end: 8,  emoji: 'ğŸŒ…', name: 'Dawn',       mult: 1.2  },
            morning:   { start: 8,  end: 12, emoji: 'â˜€ï¸', name: 'Morning',    mult: 1.3  },
            noon:      { start: 12, end: 15, emoji: 'ğŸŒ', name: 'Solar Peak', mult: 1.5  },
            afternoon: { start: 15, end: 18, emoji: 'ğŸŒ¤ï¸', name: 'Afternoon',  mult: 1.25 },
            sunset:    { start: 18, end: 20, emoji: 'ğŸŒ†', name: 'Sunset',     mult: 1.15 },
            // Moon Cycle: 20:00 - 5:00
            night:     { start: 20, end: 5,  emoji: 'ğŸŒ™', name: 'Night',      mult: 1.4  }
        };

        function getCETTime() {
            return new Date(new Date().toLocaleString("en-US", { timeZone: "Europe/Rome" }));
        }

        // Calculate smooth celestial position based on exact time
        function getCelestialPosition() {
            const now = getCETTime();
            const hour = now.getHours();
            const minute = now.getMinutes();
            const timeDecimal = hour + minute / 60;

            // Determine if sun (5:00-20:00) or moon (20:00-5:00)
            const isSun = timeDecimal >= 5 && timeDecimal < 20;

            let progress; // 0 = rising (left), 0.5 = zenith (center), 1 = setting (right)

            if (isSun) {
                // Sun: 5:00 to 20:00 (15 hours)
                progress = (timeDecimal - 5) / 15;
            } else {
                // Moon: 20:00 to 5:00 (9 hours, wraps around midnight)
                if (timeDecimal >= 20) {
                    progress = (timeDecimal - 20) / 9;
                } else {
                    progress = (timeDecimal + 4) / 9; // 4 = 24 - 20
                }
            }

            // Clamp progress
            progress = Math.max(0, Math.min(1, progress));

            // X position: 5% (left) â†’ 50% (center) â†’ 95% (right)
            const x = 5 + progress * 90;

            // Y position: parabolic arc
            // At edges (progress 0 or 1): y = 52% (at sea horizon)
            // At center (progress 0.5): y = 8% (high in sky)
            const yLow = 52;
            const yHigh = 8;
            const y = yLow - Math.sin(progress * Math.PI) * (yLow - yHigh);

            // Scale: bigger near horizon, smaller at zenith
            const horizonProximity = 1 - Math.sin(progress * Math.PI);
            const scale = 0.85 + horizonProximity * 0.95;

            // Is the celestial body behind the landscape? (right side = mountain)
            // Left side rises from sea, right side sets behind mountain
            const behindLandscape = (x > 75 && y > 45) || (x < 25 && y > 50);

            // Calculate opacity: fade in when rising, fade out when setting
            // Fully visible between progress 0.08 and 0.92
            let opacity = 1;
            if (progress < 0.08) {
                opacity = progress / 0.08; // fade in
            } else if (progress > 0.92) {
                opacity = (1 - progress) / 0.08; // fade out
            }

            // Glow intensity: reduce near edges
            let glowIntensity = 1;
            if (progress < 0.15) {
                glowIntensity = progress / 0.15;
            } else if (progress > 0.85) {
                glowIntensity = (1 - progress) / 0.15;
            }

            return { x, y, scale, isSun, progress, behindLandscape, opacity, glowIntensity };
        }

        // Calculate stars opacity based on time (invisible during day, but still clickable)
        function getStarsOpacity() {
            const now = getCETTime();
            const hour = now.getHours();
            const minute = now.getMinutes();
            const time = hour + minute / 60;

            // Night (21:00 - 4:00): full stars
            if (time >= 21 || time < 4) return { opacity: 1, isStars: true };

            // Early dawn (4:00 - 6:30): stars fading out completely
            if (time >= 4 && time < 6.5) {
                const fade = (time - 4) / 2.5; // 0 to 1
                return { opacity: Math.max(0, 1 - fade), isStars: true };
            }

            // Day (6:30 - 17:00): invisible (opacity 0) but still clickable
            if (time >= 6.5 && time < 17) {
                return { opacity: 0, isStars: true };
            }

            // Pre-sunset (17:00 - 18:00): stars starting to appear gradually
            if (time >= 17 && time < 18) {
                const fade = (time - 17) / 1; // 0 to 1
                return { opacity: fade * 0.3, isStars: true };
            }

            // Sunset (18:00 - 21:00): stars fading in fully
            if (time >= 18 && time < 21) {
                const fade = (time - 18) / 3; // 0 to 1
                return { opacity: 0.3 + fade * 0.7, isStars: true };
            }

            return { opacity: 0, isStars: true };
        }

        function getCurrentTimePeriod() {
            const hour = getCETTime().getHours();
            for (const [key, period] of Object.entries(TIME_PERIODS)) {
                if (key === 'night') {
                    if (hour >= 20 || hour < 5) return { key, ...period };
                } else if (hour >= period.start && hour < period.end) {
                    return { key, ...period };
                }
            }
            return { key: 'night', ...TIME_PERIODS.night };
        }

        function updateTimePeriod() {
            const period = getCurrentTimePeriod();

            // Update theme
            document.body.classList.remove('time-night', 'time-dawn', 'time-morning', 'time-noon', 'time-afternoon', 'time-sunset');
            document.body.classList.add(`time-${period.key}`);
            currentPeriod = period.key;

            // Update UI
            document.getElementById('timeEmoji').textContent = period.emoji;
            document.getElementById('timeMult').textContent = `Ã—${period.mult}`;

            // Update celestial position (smooth arc)
            const celestialPos = getCelestialPosition();
            const celestial = document.getElementById('celestial');
            const celestialBody = document.getElementById('celestialBody');

            celestial.style.left = celestialPos.x + '%';
            celestial.style.top = celestialPos.y + '%';
            celestialBody.style.transform = `scale(${celestialPos.scale})`;

            // Apply opacity fade for rising/setting
            celestial.style.opacity = celestialPos.opacity;

            // Apply glow intensity via CSS variable
            celestial.style.setProperty('--glow-intensity', celestialPos.glowIntensity);

            // Toggle behind-landscape class
            if (celestialPos.behindLandscape) {
                celestial.classList.add('behind-landscape');
            } else {
                celestial.classList.remove('behind-landscape');
            }

            // Update stars opacity based on time
            const starsInfo = getStarsOpacity();
            const starsLayer = document.querySelector('.stars-layer');
            if (starsLayer) {
                starsLayer.style.opacity = starsInfo.opacity;
            }

            // Update audio tone
            if (AudioSystem.isPlaying) {
                AudioSystem.updateTone(period.key);
            }
        }

        // Update more frequently for smooth movement (every 30 seconds)
        setInterval(updateTimePeriod, 30000);
        // updateTimePeriod(); moved to end of script

        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // STARS - Anonymous stars in sky + Stargazers (with links)
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        let starTooltip = null;

        // Create unified star system: background + stargazers (yellow) + players (orange)
        function createStars(count, stargazers = [], players = []) {
            const container = document.getElementById('starsLayer');
            container.innerHTML = '';

            // Create tooltip if needed
            if (!starTooltip) {
                starTooltip = document.createElement('div');
                starTooltip.id = 'starTooltip';
                starTooltip.style.cssText = `
                    position: fixed;
                    padding: 6px 10px;
                    background: rgba(0, 0, 0, 0.9);
                    border: 1px solid rgba(255, 255, 255, 0.2);
                    border-radius: 4px;
                    color: #fff;
                    font-size: 11px;
                    font-family: 'JetBrains Mono', monospace;
                    pointer-events: none;
                    z-index: 1000;
                    opacity: 0;
                    transition: opacity 0.2s ease;
                `;
                document.body.appendChild(starTooltip);
            }

            // 1. Background stars (white, tiny, many) - top 48% only
            for (let i = 0; i < count; i++) {
                const star = document.createElement('div');
                const seed = (i + 500) * 7993;
                const x = ((seed * 13 + i * 37) % 96) + 2;
                const y = ((seed * 17 + i * 29) % 45) + 2;
                const size = 0.8 + (seed % 10) / 15;
                const duration = 4 + (i % 8);
                const delay = (i * 0.3) % 7;

                star.className = 'bg-star';
                star.style.cssText = `
                    position: absolute;
                    left: ${x}%;
                    top: ${y}%;
                    width: ${size}px;
                    height: ${size}px;
                    background: rgba(255, 255, 255, 0.8);
                    border-radius: 50%;
                    animation: twinkle ${duration}s ease-in-out infinite;
                    animation-delay: ${delay}s;
                `;
                container.appendChild(star);
            }

            // 2. Stargazer stars (YELLOW with cross sparkle effect) - top 48% only
            stargazers.forEach((gazer, i) => {
                if (!gazer?.login) return;
                const star = document.createElement('div');
                const seed = i * 8191;
                const x = 5 + ((seed * 11 + i * 43) % 90);
                const y = 3 + ((seed * 19 + i * 37) % 43);
                const size = 2 + (seed % 3);
                const duration = 2 + (i % 4);
                const delay = (i * 0.6) % 4;

                star.className = 'star-gazer';
                star.dataset.login = gazer.login;
                star.style.cssText = `
                    position: absolute;
                    left: ${x}%;
                    top: ${y}%;
                    width: ${size}px;
                    height: ${size}px;
                    background: #ffdd44;
                    border-radius: 50%;
                    box-shadow:
                        0 0 ${size}px #ffdd44,
                        0 -${size * 2}px ${size}px rgba(255, 220, 60, 0.4),
                        0 ${size * 2}px ${size}px rgba(255, 220, 60, 0.4),
                        -${size * 2}px 0 ${size}px rgba(255, 220, 60, 0.4),
                        ${size * 2}px 0 ${size}px rgba(255, 220, 60, 0.4);
                    animation: star-cross ${duration}s ease-in-out infinite;
                    animation-delay: ${delay}s;
                    cursor: pointer;
                    pointer-events: auto;
                    transition: transform 0.2s ease;
                `;
                star.addEventListener('click', () => window.open(`https://github.com/${gazer.login}`, '_blank'));
                star.addEventListener('mouseenter', (e) => {
                    star.style.transform = 'scale(2)';
                    starTooltip.innerHTML = `â­ ${gazer.login}`;
                    starTooltip.style.opacity = '1';
                    starTooltip.style.left = e.clientX + 12 + 'px';
                    starTooltip.style.top = e.clientY + 8 + 'px';
                });
                star.addEventListener('mouseleave', () => {
                    star.style.transform = '';
                    starTooltip.style.opacity = '0';
                });
                star.addEventListener('mousemove', (e) => {
                    starTooltip.style.left = e.clientX + 12 + 'px';
                    starTooltip.style.top = e.clientY + 8 + 'px';
                });
                container.appendChild(star);
            });

            // 3. Player stars (ORANGE, size based on karma) - top 48% only
            players.forEach((player, i) => {
                if (!player?.username) return;
                const star = document.createElement('div');
                const seed = (i + 100) * 6571;
                const x = 5 + ((seed * 17 + i * 53) % 90);
                const y = 3 + ((seed * 13 + i * 41) % 43);
                // Size: 2-4px based on karma (log scale, capped)
                const karma = player.karma || 0;
                const size = Math.min(4, 2 + Math.log10(Math.max(1, karma)) * 0.5);
                const duration = 2.5 + (i % 5);
                const delay = (i * 0.4) % 5;

                star.className = 'star-player';
                star.dataset.username = player.username;
                star.style.cssText = `
                    position: absolute;
                    left: ${x}%;
                    top: ${y}%;
                    width: ${size}px;
                    height: ${size}px;
                    background: #ff8833;
                    border-radius: 50%;
                    box-shadow:
                        0 0 ${size}px #ff8833,
                        0 -${size * 2}px ${size}px rgba(255, 140, 50, 0.35),
                        0 ${size * 2}px ${size}px rgba(255, 140, 50, 0.35),
                        -${size * 2}px 0 ${size}px rgba(255, 140, 50, 0.35),
                        ${size * 2}px 0 ${size}px rgba(255, 140, 50, 0.35);
                    animation: star-cross ${duration}s ease-in-out infinite;
                    animation-delay: ${delay}s;
                    cursor: pointer;
                    pointer-events: auto;
                    transition: transform 0.2s ease;
                `;
                star.addEventListener('click', () => window.open(`https://github.com/${player.username}`, '_blank'));
                star.addEventListener('mouseenter', (e) => {
                    star.style.transform = 'scale(2)';
                    starTooltip.innerHTML = `ğŸ® ${player.username} (${karma} karma)`;
                    starTooltip.style.opacity = '1';
                    starTooltip.style.left = e.clientX + 12 + 'px';
                    starTooltip.style.top = e.clientY + 8 + 'px';
                });
                star.addEventListener('mouseleave', () => {
                    star.style.transform = '';
                    starTooltip.style.opacity = '0';
                });
                star.addEventListener('mousemove', (e) => {
                    starTooltip.style.left = e.clientX + 12 + 'px';
                    starTooltip.style.top = e.clientY + 8 + 'px';
                });
                container.appendChild(star);
            });

            // Add star animations if not exists
            if (!document.getElementById('star-style')) {
                const style = document.createElement('style');
                style.id = 'star-style';
                style.textContent = `
                    @keyframes twinkle {
                        0%, 100% { opacity: 0.3; }
                        50% { opacity: 0.9; }
                    }
                    @keyframes star-cross {
                        0%, 100% { opacity: 0.4; box-shadow: inherit; }
                        50% { opacity: 1; filter: brightness(1.3); }
                    }
                `;
                document.head.appendChild(style);
            }

            console.log('â­ Created', count, 'bg stars,', stargazers.length, 'stargazers (yellow),', players.length, 'players (orange)');
        }
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // SOUL LIGHTS (Fireflies = Players)
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        function createSoulLights(players = {}) {
            const container = document.getElementById('soulsLayer');
            container.innerHTML = '';
            
            const playerList = Object.entries(players);
            const oneDayAgo = Date.now() - (24 * 60 * 60 * 1000);
            
            playerList.forEach(([name, data], i) => {
                const light = document.createElement('div');
                light.className = 'soul-light';
                
                const seed = name.split('').reduce((a, c) => a + c.charCodeAt(0), 0) * 7919;
                const x = 10 + ((seed * 13) % 80);
                const y = 5 + ((seed * 17) % 55);
                
                light.style.left = x + '%';
                light.style.bottom = y + '%';
                light.style.animationDuration = (3 + (i % 5)) + 's';
                light.style.animationDelay = ((i * 0.7) % 4) + 's';
                
                // Size based on karma
                const karma = data.karma || 0;
                const size = 2 + Math.min(5, Math.log10(Math.max(1, karma)) * 2);
                light.style.width = size + 'px';
                light.style.height = size + 'px';
                
                // Active if contributed recently
                if (data.last_contribution) {
                    const lastContrib = new Date(data.last_contribution).getTime();
                    if (lastContrib > oneDayAgo) {
                        light.classList.add('active');
                    }
                }
                
                light.title = `${name}: ${karma} karma`;
                container.appendChild(light);
            });
        }
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // SHOOTING STARS
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        function triggerShootingStar() {
            if (currentPeriod === 'morning' || currentPeriod === 'noon' || currentPeriod === 'afternoon') return;
            
            const star = document.getElementById('shootingStar');
            const x = 20 + Math.random() * 50;
            const y = 5 + Math.random() * 25;
            const angle = 25 + Math.random() * 20;
            
            star.style.left = x + '%';
            star.style.top = y + '%';
            star.style.transform = `rotate(${angle}deg)`;
            star.classList.remove('active');
            
            requestAnimationFrame(() => {
                star.classList.add('active');
                setTimeout(() => star.classList.remove('active'), 1500);
            });
        }
        
        // Random shooting stars at night/dawn/sunset
        setInterval(() => {
            if (Math.random() < 0.15) triggerShootingStar();
        }, 8000);
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // AURORA (Karma intensity)
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        function updateAurora(karma) {
            const aurora = document.getElementById('auroraLayer');
            if (karma >= 50) {
                aurora.classList.add('active');
                const intensity = Math.min(0.6, Math.log10(karma) / 5);
                aurora.style.setProperty('--aurora-opacity', intensity);
            } else {
                aurora.classList.remove('active');
            }
        }
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // AUDIO SYSTEM - Adaptive drone
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        const AudioSystem = {
            ctx: null, masterGain: null, isPlaying: false, nodes: [],
            
            init() {
                if (this.ctx) return;
                this.ctx = new (window.AudioContext || window.webkitAudioContext)();
                this.masterGain = this.ctx.createGain();
                this.masterGain.gain.value = 0;
                this.masterGain.connect(this.ctx.destination);
                this.createDrone();
            },
            
            createDrone() {
                const ctx = this.ctx;
                const baseFreqs = [55, 82.5, 110, 165, 220];
                
                baseFreqs.forEach((freq, i) => {
                    const osc = ctx.createOscillator();
                    osc.type = i < 2 ? 'sine' : 'triangle';
                    osc.frequency.value = freq;
                    osc.detune.value = Math.random() * 10 - 5;
                    
                    const gain = ctx.createGain();
                    gain.gain.value = 0.12 / (i + 1);
                    
                    const filter = ctx.createBiquadFilter();
                    filter.type = 'lowpass';
                    filter.frequency.value = 400 + i * 100;
                    
                    osc.connect(filter);
                    filter.connect(gain);
                    gain.connect(this.masterGain);
                    osc.start();
                    
                    this.nodes.push({ osc, gain, filter, baseFreq: freq });
                });
                
                // Noise layer
                const bufferSize = 2 * ctx.sampleRate;
                const noiseBuffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);
                const data = noiseBuffer.getChannelData(0);
                for (let i = 0; i < bufferSize; i++) data[i] = Math.random() * 2 - 1;
                
                const noise = ctx.createBufferSource();
                noise.buffer = noiseBuffer;
                noise.loop = true;
                
                const noiseFilter = ctx.createBiquadFilter();
                noiseFilter.type = 'bandpass';
                noiseFilter.frequency.value = 300;
                noiseFilter.Q.value = 1;
                
                const noiseGain = ctx.createGain();
                noiseGain.gain.value = 0.025;
                
                noise.connect(noiseFilter);
                noiseFilter.connect(noiseGain);
                noiseGain.connect(this.masterGain);
                noise.start();
                
                this.noiseFilter = noiseFilter;
                this.modulate();
            },
            
            // Adapt sound to time of day
            updateTone(period) {
                if (!this.ctx) return;
                const now = this.ctx.currentTime;
                
                const tones = {
                    night:     { detune: 0,   filterBase: 350, noiseFreq: 250 },
                    dawn:      { detune: 50,  filterBase: 450, noiseFreq: 350 },
                    morning:   { detune: 100, filterBase: 600, noiseFreq: 400 },
                    noon:      { detune: 150, filterBase: 700, noiseFreq: 450 },
                    afternoon: { detune: 75,  filterBase: 550, noiseFreq: 380 },
                    sunset:    { detune: 25,  filterBase: 400, noiseFreq: 300 }
                };
                
                const t = tones[period] || tones.night;
                
                this.nodes.forEach((node, i) => {
                    node.osc.detune.linearRampToValueAtTime(t.detune + Math.random() * 10, now + 3);
                    node.filter.frequency.linearRampToValueAtTime(t.filterBase + i * 80, now + 3);
                });
                
                if (this.noiseFilter) {
                    this.noiseFilter.frequency.linearRampToValueAtTime(t.noiseFreq, now + 3);
                }
            },
            
            modulate() {
                if (!this.isPlaying) return;
                const time = this.ctx.currentTime;
                
                this.nodes.forEach((node, i) => {
                    const mod = Math.sin(time * 0.08 + i) * 3;
                    node.osc.frequency.setValueAtTime(node.baseFreq + mod, time);
                });
                
                requestAnimationFrame(() => this.modulate());
            },
            
            fadeIn(duration = 4) {
                if (!this.ctx) this.init();
                if (this.ctx.state === 'suspended') this.ctx.resume();
                this.isPlaying = true;
                this.masterGain.gain.cancelScheduledValues(this.ctx.currentTime);
                this.masterGain.gain.setValueAtTime(this.masterGain.gain.value, this.ctx.currentTime);
                this.masterGain.gain.linearRampToValueAtTime(0.5, this.ctx.currentTime + duration);
                this.modulate();
                this.updateTone(currentPeriod);
            },
            
            fadeOut(duration = 2) {
                if (!this.ctx) return;
                this.masterGain.gain.cancelScheduledValues(this.ctx.currentTime);
                this.masterGain.gain.setValueAtTime(this.masterGain.gain.value, this.ctx.currentTime);
                this.masterGain.gain.linearRampToValueAtTime(0, this.ctx.currentTime + duration);
                setTimeout(() => { this.isPlaying = false; }, duration * 1000);
            },
            
            toggle() {
                if (this.isPlaying) { this.fadeOut(); return false; }
                else { this.fadeIn(); return true; }
            },
            
            playAchievement() {
                if (!this.ctx || !this.isPlaying) return;
                const ctx = this.ctx, now = ctx.currentTime;
                [523, 659, 784, 1047].forEach((freq, i) => {
                    const osc = ctx.createOscillator();
                    osc.type = 'triangle';
                    osc.frequency.value = freq;
                    const gain = ctx.createGain();
                    gain.gain.setValueAtTime(0, now + i * 0.1);
                    gain.gain.linearRampToValueAtTime(0.12, now + i * 0.1 + 0.03);
                    gain.gain.exponentialRampToValueAtTime(0.01, now + i * 0.1 + 0.5);
                    osc.connect(gain);
                    gain.connect(this.masterGain);
                    osc.start(now + i * 0.1);
                    osc.stop(now + i * 0.1 + 0.5);
                });
            },
            
            playMystery() {
                if (!this.ctx || !this.isPlaying) return;
                const ctx = this.ctx, now = ctx.currentTime;
                for (let i = 0; i < 10; i++) {
                    const osc = ctx.createOscillator();
                    osc.type = 'sine';
                    osc.frequency.value = 800 + Math.random() * 1200;
                    const gain = ctx.createGain(), delay = Math.random() * 0.5;
                    gain.gain.setValueAtTime(0, now + delay);
                    gain.gain.linearRampToValueAtTime(0.08, now + delay + 0.02);
                    gain.gain.exponentialRampToValueAtTime(0.01, now + delay + 0.15);
                    osc.connect(gain);
                    gain.connect(this.masterGain);
                    osc.start(now + delay);
                    osc.stop(now + delay + 0.15);
                }
            }
        };
        
        const audioToggle = document.getElementById('audioToggle');
        audioToggle.addEventListener('click', () => {
            const isPlaying = AudioSystem.toggle();
            const emoji = isPlaying ? 'ğŸ”Š' : 'ğŸ”‡';
            document.getElementById('audioEmoji').textContent = emoji;
            audioToggle.classList.toggle('active', isPlaying);
            localStorage.setItem('audioEnabled', isPlaying);
        });
        
        document.addEventListener('click', function enableAudio() {
            if (audioEnabled && !AudioSystem.isPlaying) {
                AudioSystem.fadeIn();
                audioToggle.classList.add('active');
                document.getElementById('audioEmoji').textContent = 'ğŸ”Š';
            }
            document.removeEventListener('click', enableAudio);
        }, { once: true });
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // DATA LOADING
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        async function loadState() {
            try {
                const res = await fetch('https://raw.githubusercontent.com/fabriziosalmi/enjoy/main/state.json?' + Date.now());
                const data = await res.json();
                const prevState = state;
                state = data;
                
                const karma = data.score?.total || 0;
                const level = data.levels?.current || 1;
                const players = data.players || {};
                const playerCount = Object.keys(players).length;
                const achievements = data.achievements?.unlocked_global || data.achievements?.unlocked || [];
                
                document.getElementById('statKarma').textContent = karma.toLocaleString();
                document.getElementById('statSouls').textContent = playerCount;
                document.getElementById('levelNumber').textContent = level;
                
                // Update achievements HUD
                updateAchievementsHUD(achievements);
                
                // Check for new achievements
                if (prevState) {
                    const prevAch = prevState.achievements?.unlocked_global || prevState.achievements?.unlocked || [];
                    const newAch = achievements.filter(a => !prevAch.includes(a));
                    newAch.forEach(achId => {
                        const ach = ACHIEVEMENTS.find(a => a.id === achId);
                        if (ach) showAchievement(ach.emoji, ach.name, ach.desc);
                    });
                    
                    // Check for level up
                    const prevLevel = prevState.levels?.current || 1;
                    if (level > prevLevel) {
                        showAchievement('ğŸ‰', `Level ${level}!`, 'The organism evolves');
                    }
                }
                
                // Update visuals
                updateAurora(karma);
                // createSoulLights(players); // REMOVED: players now shown as orange stars in sky
                updateStars(); // Update stars with player data (includes players as orange stars)

                console.log('ğŸ® State loaded: Level', level, '| Karma', karma, '| Players', playerCount);
                
            } catch (e) {
                console.log('Loading state...', e.message);
            }
        }
        
        async function loadRepoStats() {
            try {
                const res = await fetch('https://raw.githubusercontent.com/fabriziosalmi/enjoy/main/repo-stats.json?' + Date.now());
                if (res.ok) {
                    repoStats = await res.json();
                    // Update HUD counters
                    document.getElementById('starCount').textContent = (repoStats.stars || 0).toLocaleString();
                    document.getElementById('forkCount').textContent = (repoStats.forks || 0).toLocaleString();
                    // Update stars with all data
                    updateStars();
                    console.log('â­ Loaded repo stats:', repoStats.stars, 'stars,', repoStats.forks, 'forks');
                }
            } catch (e) {
                console.log('Repo stats error:', e.message);
                updateStars();
            }
        }

        // Unified star update with all data sources
        function updateStars() {
            const bgCount = Math.min(100, 30 + (repoStats.stars || 0) * 2);
            const stargazers = repoStats.recent_stargazers || [];
            // Convert players object to array with karma
            const players = state?.players ? Object.entries(state.players).map(([username, data]) => ({
                username,
                karma: data.karma || 0
            })) : [];
            createStars(bgCount, stargazers, players);
        }
        
        // Initial load
        loadState();
        loadRepoStats();
        createStars(40);
        updateTimePeriod(); // Init time/theme
        
        // Refresh
        setInterval(loadState, 10000);
        setInterval(loadRepoStats, 120000);
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // ACHIEVEMENTS CONFIG
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        const ACHIEVEMENTS = [
            { id: 'first_blood', emoji: 'ğŸ©¸', name: 'First Blood', desc: 'Your first contribution' },
            { id: 'og', emoji: 'ğŸ›ï¸', name: 'OG', desc: 'Among the first 10 players' },
            { id: 'speed_demon', emoji: 'ğŸ’¨', name: 'Speed Demon', desc: 'PR merged in under 60 seconds' },
            { id: 'getting_started', emoji: 'ğŸŒ±', name: 'Getting Started', desc: '5 PRs merged' },
            { id: 'dedicated', emoji: 'ğŸ’ª', name: 'Dedicated', desc: '25 PRs merged' },
            { id: 'legend', emoji: 'ğŸ‘‘', name: 'Legend', desc: '100 PRs merged' },
            { id: 'karma_hunter', emoji: 'ğŸ’', name: 'Karma Hunter', desc: '100 karma earned' },
            { id: 'karma_master', emoji: 'ğŸ’ ', name: 'Karma Master', desc: '500 karma earned' },
            { id: 'karma_god', emoji: 'ğŸŒŸ', name: 'Karma God', desc: '1000+ karma' },
            { id: 'streak_3', emoji: 'ğŸ”¥', name: 'On Fire', desc: '3 day streak' },
            { id: 'streak_7', emoji: 'âš¡', name: 'Week Warrior', desc: '7 day streak' },
            { id: 'streak_30', emoji: 'ğŸŒªï¸', name: 'Unstoppable', desc: '30 day streak' },
            { id: 'recruiter', emoji: 'ğŸ”—', name: 'Recruiter', desc: 'Invited a friend' },
            { id: 'influencer', emoji: 'ğŸ“£', name: 'Influencer', desc: '10 referrals' }
        ];
        
        function initAchievementsHUD() {
            const hud = document.getElementById('achievementsHud');
            hud.innerHTML = ACHIEVEMENTS.map(ach =>
                `<div class="ach-icon" data-ach="${ach.id}" title="${ach.name}: ${ach.desc}">${ach.emoji}</div>`
            ).join('');
        }
        
        function updateAchievementsHUD(unlockedIds = []) {
            ACHIEVEMENTS.forEach(ach => {
                const el = document.querySelector(`.ach-icon[data-ach="${ach.id}"]`);
                if (el) {
                    el.classList.toggle('unlocked', unlockedIds.includes(ach.id));
                }
            });
        }
        
        initAchievementsHUD();
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // ACHIEVEMENTS
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        function showAchievement(emoji, name, desc) {
            const toast = document.getElementById('achievementToast');
            document.getElementById('achEmoji').textContent = emoji;
            document.getElementById('achName').textContent = name;
            document.getElementById('achDesc').textContent = desc;
            toast.classList.add('show');
            AudioSystem.playAchievement();
            setTimeout(() => toast.classList.remove('show'), 4000);
        }
        
        function showMystery(emoji, title, reward) {
            const popup = document.getElementById('mysteryPopup');
            document.getElementById('mysteryEmoji').textContent = emoji || 'ğŸ';
            document.getElementById('mysteryTitle').textContent = title || 'Mystery Box!';
            document.getElementById('mysteryReward').textContent = reward || '+?? karma';
            popup.classList.add('show');
            AudioSystem.playMystery && AudioSystem.playMystery();
            setTimeout(() => popup.classList.remove('show'), 3000);
        }
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // EASTER EGGS
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        const konamiCode = [38, 38, 40, 40, 37, 39, 37, 39, 66, 65];
        let konamiIndex = 0;
        
        document.addEventListener('keydown', (e) => {
            if (e.keyCode === konamiCode[konamiIndex]) {
                konamiIndex++;
                if (konamiIndex === konamiCode.length) {
                    konamiIndex = 0;
                    showAchievement('ğŸ®', 'KONAMI!', 'You found the secret code');
                    for (let i = 0; i < 5; i++) setTimeout(() => triggerShootingStar(), i * 300);
                }
            } else {
                konamiIndex = 0;
            }
        });
        
        // Double-click burst
        document.addEventListener('dblclick', () => {
            for (let i = 0; i < 3; i++) setTimeout(() => triggerShootingStar(), i * 200);
        });
        
        console.log('%cğŸ® ENJOY', 'font-size: 3rem; color: #6366f1; font-weight: bold');
        console.log('%cThe void welcomes you. The repo breathes.', 'color: #888');
        console.log('Type "secrets" for hints.');
        window.secrets = () => console.log('Konami code â€¢ Double-click â€¢ Watch the aurora at high karma');
    </script>
</body>
</html>
